Here is OCI-specific code generated from your YAML to provision a queue (with a DLQ) in Terraform and a Python example using the OCI Python SDK (oci.queue.QueueClient) to interact with the queue.

YAML mapping you provided
- queue name: myQueue
- size (max message size): 262144 bytes
- visibility timeout: 30 seconds
- number_of_retries: 5 (maps to the DLQ / max delivery attempts in OCI Queue)
- dead-letter queue: myDLQ
- type: standard
- metadata: project=cloud-abstractor, env=dev
- substrates include OCI (we’re focusing on OCI)

Terraform (OCI provider) to provision the queue and its DLQ
Notes:
- Replace the placeholder variables with your actual compartment OCID, tenancy OCID, user OCID, and authentication details (or set these via a tfvars file or environment).
- The exact attribute names for your Terraform OCI provider version may vary slightly; adjust to match your provider version (e.g., max_message_size_in_bytes, visibility_timeout_in_seconds, dead_letter_queue_id, etc. depending on your release).
- This example creates a DLQ named myDLQ and a main queue named myQueue that uses the DLQ. It applies the metadata via freeform_tags.

File: main.tf
--------------------------------------------------
terraform {
  required_providers {
    oci = {
      source  = "oracle/oci"
      version = ">= 4.0.0"
    }
  }
}

provider "oci" {
  tenancy_id       = var.tenancy_id
  user_id          = var.user_id
  fingerprint      = var.fingerprint
  private_key_path = var.private_key_path
  region           = var.region
}

variable "tenancy_id" {
  description = "OCID of the tenancy"
}
variable "user_id" {
  description = "OCID of the user"
}
variable "fingerprint" {
  description = "API key fingerprint"
}
variable "private_key_path" {
  description = "Path to the private key for API access"
}
variable "region" {
  description = "OCI region (e.g., us-phoenix-1)"
}
variable "compartment_id" {
  description = "OCID of the compartment where resources will be created"
}
variable "queue_name" {
  description = "Queue name"
  default     = "myQueue"
}
variable "dlq_name" {
  description = "Dead-letter queue name"
  default     = "myDLQ"
}
variable "visibility_timeout" {
  description = "Default visibility timeout in seconds"
  default     = 30
}
variable "max_message_size" {
  description = "Maximum message size in bytes"
  default     = 262144
}
variable "max_delivery_attempts" {
  description = "Maximum delivery attempts for messages (i.e., retries before DLQ)"
  default     = 5
}

# Dead-letter queue (DLQ)
resource "oci_queue_queue" "dlq" {
  compartment_id   = var.compartment_id
  name             = var.dlq_name
  display_name     = "Dead Letter Queue for ${var.queue_name}"
  freeform_tags = {
    project = "cloud-abstractor"
    env     = "dev"
  }
  # Other supported DLQ settings may be configured here if needed
}

# Main queue that uses the DLQ
resource "oci_queue_queue" "main_queue" {
  compartment_id            = var.compartment_id
  name                      = var.queue_name
  display_name              = "Queue for ${var.queue_name}"
  freeform_tags = {
    project = "cloud-abstractor"
    env     = "dev"
  }

  # Core queue settings
  visibility_timeout_in_seconds = var.visibility_timeout
  max_message_size_in_bytes     = var.max_message_size

  # Dead-letter integration
  dead_letter_queue_id = oci_queue_queue.dlq.id

  # If your provider/version supports DLQ delivery attempts, you can map it here
  # (e.g., max_delivery_attempts = var.max_delivery_attempts)
  # Note: adjust attribute name accordingly to your provider version.

  # Optional: You can add defined_tags if you prefer
  # defined_tags = {
  #   "Institute" = "Example",
  # }
}

output "dlq_ocid" {
  value = oci_queue_queue.dlq.id
}
output "queue_ocid" {
  value = oci_queue_queue.main_queue.id
}
--------------------------------------------------

Usage notes:
- After applying Terraform, Terraform will output the OCIDs for the DLQ and the main queue. You can feed these into your Python script to perform operations.
- If your OCI provider version uses slightly different field names (for example, visibility_timeout, max_message_size_in_bytes, or dead_letter_queue_id), adjust the attribute names accordingly.

Python client code (OCI Python SDK) to interact with the queue
This example demonstrates:
- Creating a message
- Receiving a message
- Deleting a message
- Changing visibility timeout
- Increasing retries via DLQ/max_delivery_attempts (via queue update)

File: queue_sample.py
--------------------------------------------------
import oci
from oci.config import from_file
from oci.queue import QueueClient
from oci.queue.models import (
    CreateQueueDetails,
    SendMessageDetails,
    ReceiveMessagesDetails,
    DeleteMessageDetails,
    ChangeMessageVisibilityDetails,
    UpdateQueueDetails,
)

def main():
    # Load OCI config from default location (~/.oci/config)
    config = from_file()

    # Instantiate the client
    queue_client = QueueClient(config)

    # Replace with actual OCIDs from Terraform outputs
    compartment_id = "<your_compartment_ocid>"
    main_queue_id = "<your_queue_ocid>"
    dlq_id = "<your_dlq_ocid>"

    # Example: Create a queue (optional if already created by Terraform)
    # create_details = CreateQueueDetails(
    #     compartment_id=compartment_id,
    #     name="myQueue",
    #     display_name="Queue for myQueue",
    #     # The following fields may vary by SDK version
    #     visibility_timeout_in_seconds=30,
    #     max_message_size_in_bytes=262144,
    #     dead_letter_queue_id=dlq_id,
    #     metadata={"project": "cloud-abstractor", "env": "dev"},
    # )
    # created_queue = queue_client.create_queue(create_details)
    # main_queue_id = created_queue.data.id

    # Send a message to the queue
    send_details = SendMessageDetails(
        queue_id=main_queue_id,
        message_body="Hello from Terraform-backed queue",
        # Optional: delay_seconds=0
    )
    send_response = queue_client.send_message(send_details)
    print("Message sent. Message ID:", send_response.data.id)

    # Receive messages (peek one message)
    receive_details = ReceiveMessagesDetails(
        queue_id=main_queue_id,
        max_messages=1
    )
    messages = queue_client.receive_messages(receive_details)
    if messages.data and len(messages.data) > 0:
        msg = messages.data[0]
        print("Received message body:", msg.body)
        receipt = msg.receipt

        # Delete the message after processing
        delete_details = DeleteMessageDetails(queue_id=main_queue_id, receipt=receipt)
        queue_client.delete_message(delete_details)
        print("Message deleted with receipt:", receipt)

        # Change visibility timeout (example: extend by 15 seconds)
        change_vis_details = ChangeMessageVisibilityDetails(
            queue_id=main_queue_id,
            receipt=receipt,
            new_visibility_timeout_in_seconds=45  # or any desired value
        )
        queue_client.change_message_visibility(change_vis_details)
        print("Visibility timeout updated for receipt:", receipt)
    else:
        print("No messages retrieved.")

    # Update queue configuration to reflect number_of_retries (max_delivery_attempts via DLQ)
    # Note: exact field name depends on SDK/provider version.
    update_details = UpdateQueueDetails(
        queue_id=main_queue_id,
        # max_delivery_count or equivalent field if supported
        # max_delivery_count=5
        # Alternatively, update DLQ settings or dead_letter_config if supported
    )
    # queue_client.update_queue(update_details)
    # print("Queue updated with retry settings.")

if __name__ == "__main__":
    main()
--------------------------------------------------

How to wire Terraform outputs into Python
- After you run terraform apply, capture the outputs:
  - dlq_ocid
  - queue_ocid
- Pass these OCIDs to your Python script (e.g., via environment variables or a config file) so queue_client can operate on the correct queue.

What you’ll need to adjust on your side
- Replace all placeholder OCIDs in the Python sample with the actual values from your Terraform deployment.
- If your OCI provider version uses slightly different attribute names for queue properties (e.g., visibility_timeout_in_seconds vs. visibility_timeout, or max_message_size_in_bytes vs. max_message_size), update the Terraform resource attributes accordingly.
- If you require more advanced DLQ behavior (like max_delivery_attempts explicitly), ensure your provider version supports it and adjust the field name in the Terraform resource and the Python UpdateQueueDetails call accordingly.
- Ensure your OCI config (or environment) has the proper credentials and access to the compartment and tenancy.

If you’d like, I can tailor the Terraform and Python code to a specific Terraform provider version or to a particular OCI region and compartment.